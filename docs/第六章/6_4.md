---
title: 6.4 Pure Pursuit
sidebar_position: 4
description: 學習自動駕駛的核心演算法：純路徑追蹤 (Pure Pursuit)。讓 VEX 機械人不再停頓轉向，而是以流暢的 S 型或圓弧路徑跑完預設航點。
keywords: [Pure Pursuit, 路徑追蹤, VEX 自動化, 機械人路徑規劃, 弧線運動, 自動導航, VEX V5 演算法]
---

## **前情提要**
在 6.3 章，我們安裝了里程計（Odometry），你的機器人現在隨時都知道自己的絕對座標 $(X, Y)$。

但光知道「我在哪」還不夠，你還必須知道「如何抵達目的地」。最笨的方法是：**原地旋轉對準目標 -> 直線衝過去 -> 停低轉向**。這太慢了！在這一章，我們要學習自動導航的精髓：**純路徑追蹤 (Pure Pursuit)**，讓機器人行出流暢的曲線。

---

## **1. 傳統移動方式 vs. 純路徑追蹤**



### **傳統移動方式（轉彎 - 移動 - 轉彎）**
1. 站在起點，原地向左轉 45 度。
2. 直線行 10 米。
3. 停低，原地向右轉 30 度。
4. 再行 5 米抵達。
* **缺點：** 每次轉彎都要減速甚至完全停低。機器人充滿頓挫感，極度浪費時間。

### **純路徑追蹤演算法 (Pure Pursuit)**
它根本不會停低。機器人一邊移動，一邊微調轉向，行出一條平滑的弧線，直接切入目的地。
* **優點：** 永不中斷，速度極快，動作行雲流水。在 15 秒的自動程式時段中，通常能比傳統方法多跑出 30% 的位移。

---

## **2. 核心原理：驢子與紅蘿蔔**

純路徑追蹤的核心邏輯只有一句話：**永遠追著眼前的那個「紅蘿蔔」跑。**

這個「紅蘿蔔」在專業術語中稱為 **前瞻點 (Look-ahead Point)**。

### **演算法步驟：**
1.  **繪製路徑：** 提供一系列座標點（如 $P_1 \to P_2 \to P_3$），連成虛擬路徑。
2.  **畫出圓圈：** 以機器人當前位置為圓心，以**前瞻距離 (Look-ahead Distance)** 為半徑畫圓。
3.  **尋找交點：** 圓圈與路徑線的交點即為**目標點**。
4.  **追逐目標：** 機器人計算一段圓弧曲率，對準該點開過去。



---

## **3. 數學原理：尋找完美弧線**

Pure Pursuit 的目標是算出機器人應該轉彎的**曲率 (Curvature)**。我們假設機器人是在一個半徑為 $R$ 的圓弧上行駛。

#### **第一步：坐標轉換**
將場地座標系下的前瞻點 $(x_g, y_g)$ 轉換為機器人的局部座標系 $(x_L, y_L)$，其中機器人位置為原點 $(0,0)$。

#### **第二步：曲率公式推導**
根據幾何關係，機器人到目標點的直線距離為 $L$（即前瞻距離）。所需的轉彎半徑 $R$ 與局部座標 $x$ 的關係如下：
$$x^2 + (R - y)^2 = R^2$$
簡化後可得到曲率 $C$（即 $1/R$）：
$$C = \frac{2x}{L^2}$$



#### **第三步：輪速分配**
根據底盤**輪距 (Track Width, $W$)** 分配左右馬達速度：
* **左輪速度 ($V_L$)：** $V \times \frac{2 + C \times W}{2}$
* **右輪速度 ($V_R$)：** $V \times \frac{2 - C \times W}{2}$

---

## **4. 關鍵參數：前瞻距離 (Look-ahead Distance)**

* **情況 A：半徑太小（如 5 英吋）**
    * **現象：** 機器人反應過敏，出現嚴重的**震盪 (Oscillation)**。
* **情況 B：半徑太大（如 50 英吋）**
    * **現象：** 機器人只看遠方，嚴重**抄捷徑 (Corner Cutting)**。

**💡 黃金法則：** 通常設定在 10 到 18 英吋。數值越大越平滑，數值越小越精準。

---

## **5. LemLib 實戰參數 (moveToPose)**

在使用 LemLib 等函式庫時，我們會接觸到以下進階參數：

* **`lead` (預設 0.6)：** 控制路徑的「彎曲程度」。接近 1 時會行出較大的弧線。
* **`minSpeed` & `earlyExitRange`：** * 設定 `minSpeed > 0` 可讓機器人「衝過」目標點而不停低。
    * 這對於銜接多個動作（Motion Chaining）至關重要。

---

## **🎤 評審面談實戰 (Judges Interview)**

**Q1. 你們如何實現無停頓的過彎？**
**🧐 回答：**「我們採用了 **Pure Pursuit 演算法**。透過計算公式 $C = 2x/L^2$ 得到即時曲率，機器人能不斷追蹤路徑上的前瞻點。這讓我們的自動程式不再是簡單的『直行、原地旋轉』，而是連續的弧線運動，最大化保持了機器人的動能。」

**Q2. 調整前瞻距離時遇到了什麼挑戰？**
**🧐 回答：**「調整 $L$（前瞻距離）是最大的挑戰。我們發現若 $L$ 太短會導致 PID 控制器產生高頻震盪；若 $L$ 太長則會出現明顯的 Corner Cutting 導致撞到障礙物。我們最終透過反覆測試，根據底盤速度找到了最優的平衡點。」