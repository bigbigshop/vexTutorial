---
title: 6.2 PID：直線修正
sidebar_position: 2
description: 將 PID 理論應用於底盤控制。解決機器人行駛「香蕉線」的問題，並實現無晃動的精準原地轉向。
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## **前情提要**
在 6.1 章，我們學習了 PID 的核心概念（P 代表油門，D 代表剎車）。這一章，我們要將概念帶入實戰，解決 VEX 機器人最常見的痛點：**行唔直（無法走直線）**。

你有沒有發現，即使寫了 `driveForward(1000)`，機器人行起來總會畫出一條「香蕉線」？這章我們將利用 PID 進行即時校正。

---

## **1. 為什麼機器人行唔直？**

物理世界充滿了變數，導致左右輪速度不一：
1. **摩擦力差異：** 左邊輪軸可能稍微卡澀，右邊則較平滑。
2. **重心不平衡：** 機器人一側安裝了沉重的馬達或結構，導致該側輪胎壓力大、摩擦力增加。
3. **地面不平：** 場地地墊（Foam Tiles）的接縫處有高低落差，導致輪胎打滑。

**結果：** 即使給予左右馬達同樣 50% 的電力，如果一邊跑得快，機器人自然會向另一側偏移。



---

## **2. 解決方案：陀螺儀修正 (Gyro Correction)**

我們不能單靠輪子自己跑得一樣快，我們需要一個「監工」——**慣性感應器 (Inertial Sensor)**。

**核心邏輯：**
* 設定目標朝向（例如：0 度）。
* 機器人行駛時，感應器不斷監測目前的角度。
* 如果發現機器人偏離了 2 度，代表車頭向右偏了。
* **修正：** 透過 P 控制器，減少右輪動力並增加左輪動力，將車頭「扭回」0 度。

---

## **3. 實戰演算法：直線行駛 (Drive Straight)**

我們不需要完整的 PID，只需一個簡單的 **P (Proportional)** 比例控制，就能讓行直線的效果提升 10 倍。

### **邏輯架構：**
1. **讀取感應器：** 獲取當前朝向（Heading）。
2. **計算誤差：** $Error = TargetHeading - CurrentHeading$。
3. **施加修正：** 左右輪分別以 `BaseSpeed + Correction` 與 `BaseSpeed - Correction` 運行。

---

## **4. 進階：原地轉彎 PID (Turn PID)**

傳統的 `turn(90)` 通常會因為慣性衝到 105 度再回彈，既慢又不準。
使用 **PD 控制** 的轉彎：全速轉向 -> 到達 85 度時開始預測減速 -> 精準停在 90 度，不晃動。



---

## **5. 🎙️ 評審面試實戰 (Judges Interview)**

**Q1. 你們的自動程式行得非常直，是用了特殊的機械結構嗎？**
*(考察重點：軟硬體整合與閉迴路意識)*

**🧐 回答範例：**
「我們在機械設計上盡量平衡了重心，但主要功勞歸功於軟體的**陀螺儀校正 (Gyro Correction)**。我們並非簡單地給予左右輪相同電力，而是編寫了一個閉迴路控制演算法。慣性感應器會即時監控車頭朝向，一旦偵測到偏差 (Heading Error)，演算法會透過 P 控制器即時微調左右馬達的電壓比。這就像為機器人安裝了『車道維持輔助』系統。」

**Q2. 為什麼轉向要用 PID 控制，而不直接設定旋轉時間？**
*(考察點：控制精準度與環境適應力)*

**🧐 回答範例：**
「時間控制 (Time-based) 受電池電壓影響太大，電量不足時往往轉不到位。我們的 PID 控制是基於感應器回饋的。我們使用了 **PD 演算法**：P 項確保我們能全速衝向目標角度，而 **D 項 (微分項)** 則扮演了『電子剎車』，防止抵達目標時因慣性而**過衝 (Overshoot)**。這令我們無論電池剩餘多少電量，每次轉向都能精準達到 90 度。」

---